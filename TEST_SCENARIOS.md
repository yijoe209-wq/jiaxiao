# 家校任务管理助手 - 用户操作测试场景

**日期**: 2026-01-16
**测试环境**: https://edu-track.zeabur.app
**测试工具**: Playwright

---

## 测试场景概览

### 场景 1: 新用户注册和首次使用
### 场景 2: 老用户登录
### 场景 3: 添加学生信息
### 场景 4: 快速添加任务（AI 解析）
### 场景 5: 任务中心管理
### 场景 6: 完成和编辑任务
### 场景 7: 多任务批量确认
### 场景 8: 学生管理
### 场景 9: 退出登录

---

## 场景 1: 新用户注册和首次使用

### 操作步骤

1. **访问登录页面**
   - URL: `/login`
   - 预期: 显示登录/注册表单

2. **切换到注册标签**
   - 点击"注册"标签
   - 预期: 表单切换到注册模式

3. **填写注册信息**
   - 输入邮箱: `test@example.com`
   - 输入密码: `test123456`
   - 输入家长姓名: `测试家长`
   - 预期: 所有字段都能正常输入

4. **提交注册**
   - 点击"注册"按钮
   - 预期:
     - 注册成功提示
     - 自动登录
     - 跳转到首页（任务中心）

5. **验证登录状态**
   - 检查页面右上角显示用户名
   - 预期: 显示"测试家长"

---

## 场景 2: 老用户登录

### 操作步骤

1. **访问登录页面**
   - URL: `/login`
   - 预期: 显示登录表单

2. **填写登录信息**
   - 输入邮箱: `alves820@live.cn`
   - 输入密码: `********`
   - 预期: 所有字段都能正常输入

3. **提交登录**
   - 点击"登录"按钮
   - 预期:
     - 登录成功提示
     - 跳转到首页（任务中心）

4. **验证登录状态**
   - 检查页面 URL: `/`
   - 检查页面标题: "任务中心"
   - 预期: 已登录状态

---

## 场景 3: 添加学生信息

### 前置条件
- 已登录

### 操作步骤

1. **访问学生管理页面**
   - URL: `/students`
   - 或点击导航栏"学生管理"

2. **验证页面状态**
   - 预期: 显示"暂无学生"提示（首次使用）

3. **点击添加学生**
   - 点击"添加学生"按钮
   - 预期: 弹出添加学生表单

4. **填写学生信息**
   - 学生姓名: `张三`
   - 年级: `三年级`
   - 班级: `2班`
   - 预期: 所有字段都能正常输入

5. **提交表单**
   - 点击"确定"按钮
   - 预期:
     - 表单关闭
     - 学生列表显示新添加的学生
     - 显示成功提示

6. **验证学生信息**
   - 检查学生卡片显示:
     - 姓名: 张三
     - 年级: 三年级
     - 班级: 2班

7. **添加第二个学生（可选）**
   - 重复上述步骤
   - 姓名: `李四`
   - 年级: `五年级`
   - 班级: `1班`

---

## 场景 4: 快速添加任务（AI 解析）

### 前置条件
- 已登录
- 已添加至少一个学生

### 操作步骤

1. **访问快速添加页面**
   - URL: `/add`
   - 或点击导航栏"快速添加"

2. **验证页面状态**
   - 预期: 显示任务输入表单

3. **输入作业消息（单任务）**

   **测试用例 1**: 英语作业
   ```
   英语：1-4单元粗体字单词一英一汉；4单元短语一英一汉；打卡
   ```
   - 预期:
     - 输入框正常输入
     - 点击"AI 解析"按钮
     - 显示解析中状态（5-10秒）
     - 显示任务预览

4. **查看任务预览**
   - 预期显示:
     - 任务类型: 单条任务
     - 科目: 英语
     - 任务描述: 完整的作业内容
     - 任务类型: 书写

5. **修改任务（可选）**
   - 点击编辑按钮
   - 修改任务描述
   - 预期: 可以修改并保存

6. **选择学生**
   - 从下拉列表选择学生: `张三`
   - 预期: 下拉列表显示所有已添加的学生

7. **确认创建**
   - 点击"确认创建"按钮
   - 预期:
     - 显示成功提示
     - 自动跳转到任务中心
     - 新任务出现在任务列表

---

## 场景 5: 任务中心管理

### 前置条件
- 已登录
- 已创建至少一个任务

### 操作步骤

1. **访问任务中心**
   - URL: `/`
   - 预期: 显示任务中心页面

2. **验证页面布局**
   - 左侧: 学生筛选器
   - 中间: 任务列表
   - 右上角: "快速添加"按钮

3. **查看任务列表**
   - 预期显示:
     - 任务卡片
     - 科目标签
     - 任务描述
     - 截止日期（如果有）
     - 完成状态（未完成/已完成）

4. **筛选学生**
   - 点击学生: `张三`
   - 预期: 只显示该学生的任务

5. **查看全部任务**
   - 点击"全部"
   - 预期: 显示所有学生的任务

6. **检查任务统计**
   - 预期显示:
     - 待完成任务数量
     - 已完成任务数量

---

## 场景 6: 完成和编辑任务

### 前置条件
- 已登录
- 任务列表中有未完成任务

### 操作步骤

1. **标记任务完成**
   - 找到一个未完成任务
   - 点击任务卡片上的"完成"按钮
   - 预期:
     - 任务状态变为"已完成"
     - 任务卡片样式改变（灰色/划线）
     - 显示成功提示

2. **撤销完成**
   - 点击已完成任务的"撤销"按钮
   - 预期:
     - 任务状态恢复为"未完成"
     - 任务卡片样式恢复

3. **编辑任务**
   - 点击任务卡片上的"编辑"按钮
   - 预期: 弹出编辑表单

4. **修改任务信息**
   - 修改任务描述
   - 修改截止日期
   - 预期: 所有字段都能正常编辑

5. **保存修改**
   - 点击"保存"按钮
   - 预期:
     - 表单关闭
     - 任务信息已更新
     - 显示成功提示

---

## 场景 7: 多任务批量确认

### 前置条件
- 已登录
- 已添加学生

### 操作步骤

1. **访问快速添加页面**
   - URL: `/add`

2. **输入多科目作业消息**

   **测试用例 2**: 多科目作业
   ```
   1.英语：1-4单元粗体字单词一英一汉；4单元短语一英一汉；打卡
   2.政治：卷子，3题不写；地理：第一单元卷子写完；历史：卷子；生物：无作业
   3.语文：文言文卷子四题写完；卷子写完
   4.数学：卷子写完；上课写的4题研究一下
   ```

3. **AI 解析**
   - 点击"AI 解析"按钮
   - 预期:
     - 显示解析中状态（5-10秒）
     - 成功解析出多个任务

4. **查看任务预览**
   - 预期显示:
     - 任务类型: 复合任务（多条）
     - 任务总数: 10 条
     - 任务列表:
       1. 英语: 1-4单元粗体字单词一英一汉...
       2. 政治: 卷子，3题不写
       3. 地理: 第一单元卷子写完
       4. 历史: 卷子
       5. 语文: 文言文卷子四题写完
       6. 语文: 卷子写完
       7. 数学: 卷子写完
       8. 数学: 上课写的4题研究一下

5. **编辑任务（可选）**
   - 点击某个任务的编辑按钮
   - 修改任务描述
   - 预期: 可以单独编辑每个任务

6. **选择学生**
   - 从下拉列表选择学生
   - 或点击"分配给不同学生"

7. **批量确认**
   - 点击"确认创建"按钮
   - 预期:
     - 显示成功提示
     - 显示创建的任务数量
     - 自动跳转到任务中心
     - 所有新任务出现在任务列表

---

## 场景 8: 学生管理

### 前置条件
- 已登录
- 已添加学生

### 操作步骤

1. **访问学生管理页面**
   - URL: `/students`

2. **查看学生列表**
   - 预期显示所有已添加的学生卡片

3. **编辑学生信息**
   - 点击某个学生的"编辑"按钮
   - 修改学生姓名、年级、班级
   - 点击"保存"
   - 预期:
     - 学生信息已更新
     - 显示成功提示

4. **删除学生**
   - 点击某个学生的"删除"按钮
   - 确认删除
   - 预期:
     - 学生卡片被移除
     - 显示成功提示
     - 该学生的任务也被删除（级联删除）

---

## 场景 9: 退出登录

### 操作步骤

1. **访问退出登录**
   - URL: `/logout`
   - 或点击导航栏"退出"

2. **验证退出状态**
   - 预期:
     - 跳转到登录页面
     - Session 已清除
     - 无法访问需要登录的页面

3. **尝试访问受保护页面**
   - 直接访问: `/`
   - 预期:
     - 自动跳转到 `/login`
     - 显示"请先登录"提示

---

## 异常场景测试

### 测试用例 1: 未登录访问受保护页面

1. 清除 Cookie / Session
2. 直接访问 `/`
3. 预期: 跳转到 `/login`

### 测试用例 2: 错误的登录信息

1. 输入错误的邮箱或密码
2. 点击"登录"
3. 预期:
   - 显示错误提示
   - 保持在登录页面

### 测试用例 3: 重复注册

1. 尝试使用已存在的邮箱注册
2. 预期:
   - 显示"该邮箱已注册"错误
   - 保持在注册页面

### 测试用例 4: 空任务提交

1. 不输入任何内容
2. 点击"AI 解析"
3. 预期:
   - 显示"消息内容不能为空"错误
   - 不发送请求

### 测试用例 5: 无学生时创建任务

1. 删除所有学生
2. 尝试创建任务
3. 预期:
   - 显示"请先添加学生"错误
   - 或跳转到学生管理页面

---

## 性能测试

### 页面加载时间

- 登录页面: < 1秒
- 任务中心: < 2秒
- 快速添加: < 1秒
- 学生管理: < 1秒

### AI 解析时间

- 单任务: 5-10秒
- 多任务（10条）: 10-15秒

### API 响应时间

- 登录: < 1秒
- 注册: < 1秒
- 获取任务列表: < 500ms
- 创建任务: < 1秒
- 完成任务: < 500ms

---

## 兼容性测试

### 浏览器

- ✅ Chrome (最新版)
- ✅ Safari (最新版)
- ✅ Firefox (最新版)
- ✅ Edge (最新版)

### 设备

- ✅ 桌面端 (1920x1080)
- ✅ 笔记本 (1366x768)
- ✅ 平板 (iPad)
- ✅ 手机 (iPhone/Android)

---

## UI/UX 检查

### 设计风格

- ✅ 日式极简风格
- ✅ 黑白灰配色
- ✅ Noto Sans SC + Inter 字体
- ✅ 无 Emoji 元素
- ✅ 干净的留白
- ✅ 清晰的层次结构

### 交互反馈

- ✅ 按钮悬停效果
- ✅ 加载状态提示
- ✅ 成功/错误提示
- ✅ 表单验证提示
- ✅ 平滑的动画过渡

---

## 测试数据

### 测试账号

```
邮箱: alves820@live.cn
密码: (已设置)
```

### 测试学生

```
学生1:
  姓名: 张三
  年级: 三年级
  班级: 2班

学生2:
  姓名: 李四
  年级: 五年级
  班级: 1班
```

### 测试任务

```
单任务:
  英语：1-4单元粗体字单词一英一汉；4单元短语一英一汉；打卡

多任务:
  1.英语：1-4单元粗体字单词一英一汉；4单元短语一英一汉；打卡
  2.政治：卷子，3题不写；地理：第一单元卷子写完；历史：卷子；生物：无作业
  3.语文：文言文卷子四题写完；卷子写完
  4.数学：卷子写完；上课写的4题研究一下
```

---

## 测试检查清单

### 功能测试

- [ ] 用户注册
- [ ] 用户登录
- [ ] 用户退出
- [ ] 添加学生
- [ ] 编辑学生
- [ ] 删除学生
- [ ] 快速添加任务（单任务）
- [ ] 快速添加任务（多任务）
- [ ] AI 解析作业消息
- [ ] 编辑任务
- [ ] 完成任务
- [ ] 撤销完成
- [ ] 筛选学生任务
- [ ] 查看任务统计
- [ ] 页面导航
- [ ] Session 持久化

### 异常测试

- [ ] 未登录访问受保护页面
- [ ] 错误的登录信息
- [ ] 重复注册
- [ ] 空任务提交
- [ ] 无学生时创建任务
- [ ] 网络错误处理
- [ ] API 错误处理

### UI/UX 测试

- [ ] 响应式布局
- [ ] 日式极简风格
- [ ] 无 Emoji 元素
- [ ] 加载状态
- [ ] 成功/错误提示
- [ ] 表单验证
- [ ] 平滑动画

---

**文档版本**: 1.0
**最后更新**: 2026-01-16
