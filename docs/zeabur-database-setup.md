# Zeabur æ•°æ®åº“é…ç½®æŒ‡å—

## é—®é¢˜: æ³¨å†Œçš„è´¦å·æ•°æ®ä¸¢å¤±

### å¯èƒ½çš„åŸå› 

1. **PostgreSQL æœåŠ¡è¢«åˆ é™¤é‡å»º**
   - åœ¨ Zeabur æ§åˆ¶å°ä¸­åˆ é™¤å¹¶é‡æ–°åˆ›å»º PostgreSQL æœåŠ¡ä¼šå¯¼è‡´æ‰€æœ‰æ•°æ®ä¸¢å¤±
   - æ¯æ¬¡åˆ›å»ºæ–°çš„ PostgreSQL å®ä¾‹éƒ½ä¼šè·å¾—ä¸€ä¸ªç©ºçš„æ•°æ®åº“

2. **DATABASE_URL ç¯å¢ƒå˜é‡å˜åŒ–**
   - å¦‚æœ `DATABASE_URL` å‘ç”Ÿå˜åŒ–,åº”ç”¨ä¼šè¿æ¥åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹
   - æ—§æ•°æ®åº“ä¸­çš„æ•°æ®ä¼š"ä¸¢å¤±"ï¼ˆå®é™…ä¸Šè¿˜åœ¨åŸæ¥çš„å®ä¾‹ä¸­ï¼‰

3. **å…è´¹çš„æ•°æ®åº“æœåŠ¡é™åˆ¶**
   - Zeabur å…è´¹å¥—é¤çš„ PostgreSQL å¯èƒ½æœ‰è‡ªåŠ¨æ¸…ç†ç­–ç•¥

## å½“å‰é…ç½®æ£€æŸ¥

### âœ… å·²æ­£ç¡®é…ç½®çš„é¡¹

æ ¹æ® `.zeabur.yaml` é…ç½®:

```yaml
- type: postgresql
  name: Postgres-JIAXIAO
  version: "15"
  database: jiaxiao_db
  volumes:
    - /var/lib/postgresql/data  # âœ… æŒä¹…åŒ–å·²é…ç½®
```

**æŒä¹…åŒ–å·å·²é…ç½®**,ç†è®ºä¸Šæ•°æ®åº”è¯¥ä¿ç•™ã€‚

### ğŸ” éœ€è¦æ£€æŸ¥çš„é¡¹

#### 1. åœ¨ Zeabur æ§åˆ¶å°æ£€æŸ¥

è®¿é—® Zeabur æ§åˆ¶å°: https://zeabur.com/

æ£€æŸ¥ä»¥ä¸‹å†…å®¹:

**a) PostgreSQL æœåŠ¡çŠ¶æ€**
- è¿›å…¥ä½ çš„é¡¹ç›® â†’ jiaxiao
- æŸ¥çœ‹ `Postgres-JIAXIAO` æœåŠ¡
- ç¡®è®¤æœåŠ¡çŠ¶æ€ä¸º "Running"
- æŸ¥çœ‹æœåŠ¡çš„åˆ›å»ºæ—¶é—´ï¼ˆå¦‚æœåˆ›å»ºæ—¶é—´å¾ˆçŸ­,å¯èƒ½æ˜¯æœ€è¿‘é‡å»ºçš„ï¼‰

**b) ç¯å¢ƒå˜é‡**
- åœ¨ä¸»åº”ç”¨æœåŠ¡ `jiaxiao` ä¸­
- æ£€æŸ¥ `DATABASE_URL` ç¯å¢ƒå˜é‡
- æ ¼å¼åº”è¯¥æ˜¯: `postgresql://username:password@host:port/database`
- **é‡è¦**: è®°å½•ä¸‹è¿™ä¸ª URL,ä»¥ä¾¿åç»­æ¯”è¾ƒ

**c) æŒä¹…åŒ–å­˜å‚¨**
- åœ¨ PostgreSQL æœåŠ¡è®¾ç½®ä¸­
- æŸ¥çœ‹ "Volumes" æˆ– "Storage" æ ‡ç­¾
- ç¡®è®¤ `/var/lib/postgresql/data` å·²æŒ‚è½½åˆ°æŒä¹…åŒ–å­˜å‚¨

#### 2. ä½¿ç”¨è„šæœ¬æ£€æŸ¥æ•°æ®åº“

```bash
# ä» Zeabur æ§åˆ¶å°è·å– DATABASE_URL
export DATABASE_URL='postgresql://...'

# è¿è¡Œæ£€æŸ¥è„šæœ¬
python check_prod_users.py
```

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: é‡æ–°æ³¨å†Œè´¦å·ï¼ˆæ¨èï¼‰

å¦‚æœç¡®è®¤æ•°æ®å·²ä¸¢å¤±,æœ€ç®€å•çš„æ–¹æ³•æ˜¯é‡æ–°æ³¨å†Œ:

1. è®¿é—®: https://edu-track.zeabur.app/login
2. ç‚¹å‡»"æ³¨å†Œ"æ ‡ç­¾
3. å¡«å†™ä¿¡æ¯å¹¶æ³¨å†Œ
4. **é‡è¦**: è®°ä½ä½ çš„è´¦å·å’Œå¯†ç !

### æ–¹æ¡ˆ 2: å¤‡ä»½å’Œæ¢å¤ï¼ˆé¢„é˜²å°†æ¥æ•°æ®ä¸¢å¤±ï¼‰

#### åˆ›å»ºå®šæœŸå¤‡ä»½

åœ¨ Zeabur æ§åˆ¶å°:

1. è¿›å…¥ PostgreSQL æœåŠ¡
2. æŸ¥çœ‹ "Backups" æˆ– "å¤‡ä»½" åŠŸèƒ½
3. è®¾ç½®è‡ªåŠ¨å¤‡ä»½ç­–ç•¥

#### æ‰‹åŠ¨å¤‡ä»½

ä½¿ç”¨ `pg_dump` å¯¼å‡ºæ•°æ®:

```bash
# å®‰è£… PostgreSQL å®¢æˆ·ç«¯
# macOS: brew install postgresql
# Ubuntu: sudo apt-get install postgresql-client

# å¯¼å‡ºæ•°æ®
pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql
```

#### æ¢å¤æ•°æ®

```bash
psql $DATABASE_URL < backup_20260113.sql
```

### æ–¹æ¡ˆ 3: ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“æœåŠ¡

è€ƒè™‘ä½¿ç”¨æ›´å¯é çš„æ•°æ®åº“æœåŠ¡:

1. **Supabase** - å…è´¹çš„ PostgreSQL,è‡ªåŠ¨å¤‡ä»½
2. **Neon** - æ— æœåŠ¡å™¨ PostgreSQL,æŒ‰éœ€è®¡è´¹
3. **Railway** - æä¾›æŒä¹…åŒ–æ•°æ®åº“

## é˜²æ­¢æ•°æ®ä¸¢å¤±çš„æœ€ä½³å®è·µ

### 1. ä¸è¦åˆ é™¤æ•°æ®åº“æœåŠ¡

åœ¨ Zeabur ä¸­:
- âœ… å¯ä»¥é‡å¯æœåŠ¡
- âœ… å¯ä»¥é‡æ–°éƒ¨ç½²åº”ç”¨
- âŒ ä¸è¦åˆ é™¤å¹¶é‡æ–°åˆ›å»º PostgreSQL æœåŠ¡

### 2. ä¿æŠ¤å¥½ç¯å¢ƒå˜é‡

- `DATABASE_URL` åŒ…å«æ•°æ®åº“è¿æ¥ä¿¡æ¯
- ä¸è¦éšæ„ä¿®æ”¹è¿™ä¸ªç¯å¢ƒå˜é‡
- å¦‚æœå¿…é¡»ä¿®æ”¹,ç¡®ä¿å…ˆå¤‡ä»½æ—§æ•°æ®åº“çš„æ•°æ®

### 3. å®šæœŸå¤‡ä»½æ•°æ®

å»ºè®®æ¯å‘¨å¤‡ä»½ä¸€æ¬¡:
- ä½¿ç”¨ Zeabur çš„è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼ˆå¦‚æœæœ‰ï¼‰
- æˆ–æ‰‹åŠ¨å¯¼å‡ºæ•°æ®åˆ°æœ¬åœ°

### 4. ç›‘æ§æ•°æ®åº“çŠ¶æ€

å®šæœŸæ£€æŸ¥:
- æ•°æ®åº“æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- å­˜å‚¨ç©ºé—´æ˜¯å¦å……è¶³
- æ•°æ®åº“åˆ›å»ºæ—¶é—´ï¼ˆç¡®è®¤æ²¡æœ‰è¢«é‡å»ºï¼‰

## ç«‹å³è¡ŒåŠ¨æ¸…å•

- [ ] è®¿é—® Zeabur æ§åˆ¶å°,æ£€æŸ¥ PostgreSQL æœåŠ¡çŠ¶æ€
- [ ] è®°å½•å½“å‰çš„ `DATABASE_URL`
- [ ] ä½¿ç”¨ `check_prod_users.py` æ£€æŸ¥ç°æœ‰ç”¨æˆ·
- [ ] å¦‚æœæ•°æ®ä¸¢å¤±,é‡æ–°æ³¨å†Œè´¦å·
- [ ] è®¾ç½®å®šæœŸå¤‡ä»½è®¡åˆ’
- [ ] å°†è´¦å·ä¿¡æ¯ä¿å­˜åœ¨å¯†ç ç®¡ç†å™¨ä¸­

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨:

1. æŸ¥çœ‹ Zeabur æ–‡æ¡£: https://zeabur.com/docs/
2. è”ç³» Zeabur æ”¯æŒ
3. æ£€æŸ¥åº”ç”¨çš„æ—¥å¿—æ–‡ä»¶,çœ‹æ˜¯å¦æœ‰æ•°æ®åº“è¿æ¥é”™è¯¯
